# [93. 复原 IP 地址](https://leetcode.cn/problems/restore-ip-addresses/)

切割回溯，需要多注意一些特殊情况。

```java
class Solution {
    List<String> res;
    List<String> path;
    public List<String> restoreIpAddresses(String s) {
        // 类似于131.分割回文串
        res = new ArrayList<>();
        path = new ArrayList<>();
        backtracking(s);
        return res;
    }
    private void backtracking(String s){
        if(path.size() > 4){
            return;
        }
        if(s.length() == 0){
            if(path.size() != 4) return;
            // 结算
            StringBuilder tmp = new StringBuilder();
            for(int i = 0; i < path.size(); i ++){
                String ts = path.get(i);
                tmp.append(ts);
                if(i != path.size() - 1) tmp.append('.');
            }
            res.add(tmp.toString());
        }
        for(int i = 1; i <= s.length(); i ++){
            // 最长只能有3位
            if(i > 3) break;
            String tmpStr = s.substring(0,i);
            if(ipValid(tmpStr)){
                path.add(tmpStr);
                backtracking(s.substring(i));
                path.remove(path.size() - 1);
            }
            else{
                continue;
            }
        }
    }
    private boolean ipValid(String ip){
        // 0~255 不含前导0
        if(ip.charAt(0) == '0' && ip.length() > 1){
            return false;
        }
        int num = Integer.parseInt(ip);
        if(num < 0 || num > 255){
            return false;
        }
        return true;
    }
}
```

