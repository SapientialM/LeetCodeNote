# [42. 接雨水](https://leetcode.cn/problems/trapping-rain-water/)

神奇的每次都考虑左右边界即可

```java
class Solution {
    public int trap(int[] height) {
        int res = 0;
        Deque<Integer> stack = new ArrayDeque<>();
        
        for (int i = 0; i < height.length; i++) {
            int currentHeight = height[i];
            
            // 当当前高度大于栈顶高度时，说明可以形成凹槽接雨水
            while (!stack.isEmpty() && currentHeight > height[stack.peek()]) {
                int bottomIndex = stack.pop();  // 凹槽底部索引
                int bottomHeight = height[bottomIndex];
                
                if (stack.isEmpty()) {
                    break;  // 没有左边界，无法接雨水
                }
                
                int leftIndex = stack.peek();  // 左边界索引
                int leftHeight = height[leftIndex];
                
                // 计算当前层能接的雨水量
                int width = i - leftIndex - 1;
                int waterHeight = Math.min(leftHeight, currentHeight) - bottomHeight;
                res += width * waterHeight;
            }
            
            stack.push(i);
        }
        
        return res;
    }
}

```

