# [84. 柱状图中最大的矩形](https://leetcode.cn/problems/largest-rectangle-in-histogram/)

单调栈，不一定逆向，正向也有不同用处

```java
class Solution {
    public int largestRectangleArea(int[] heights) {
        // 单调栈解决，向右扩展，栈内保存单调柱形，当无法单调时会开始结算，结算向右结算
        Stack<Integer> poSt = new Stack<>();
        // 哨兵
        poSt.push(-1);
        int maxS = 0; 
        for(int i = 0; i <= heights.length; i ++){
            int num;
            if(i == heights.length){
                // 尾部必结算
                num = 0;
            }
            else{
                num = heights[i];
            }
            // 开始结算
            while(poSt.peek()!= -1 && num < heights[poSt.peek()]){
                int j = poSt.pop();
                int h = heights[j];
                int w = i - poSt.peek() - 1;
                int S = h*w;
                if(maxS < S){
                    maxS = S;
                }
            }
            poSt.push(i);
        }
        return maxS;
    }
}
```

