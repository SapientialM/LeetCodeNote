# [309. 买卖股票的最佳时机含冷冻期](https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/)

冷冻期会添加一个状态：

```java
class Solution {
    public int maxProfit(int[] prices) {
        int n = prices.length;
        if (n < 2) return 0;
        
        // 状态定义：
        // dp[i][0]: 第i天结束时持有股票的最大利润
        // dp[i][1]: 第i天结束时不持有股票，且处于冷冻期的最大利润
        // dp[i][2]: 第i天结束时不持有股票，且不处于冷冻期的最大利润
        int[][] dp = new int[n][3];
        
        // 初始化
        dp[0][0] = -prices[0];  // 第一天买入
        dp[0][1] = 0;           // 第一天不可能处于冷冻期
        dp[0][2] = 0;           // 第一天不操作
        
        for (int i = 1; i < n; i++) {
            // 第i天持有股票：可能是i-1天就持有，或者i-1天不持有且不处于冷冻期时买入
            dp[i][0] = Math.max(dp[i-1][0], dp[i-1][2] - prices[i]);
            
            // 第i天处于冷冻期：说明第i-1天卖出了股票
            dp[i][1] = dp[i-1][0] + prices[i];
            
            // 第i天不持有股票且不处于冷冻期：可能是i-1天就不持有，或者i-1天处于冷冻期
            dp[i][2] = Math.max(dp[i-1][2], dp[i-1][1]);
        }
        
        // 最后一天的最大利润是：不持有股票的状态（冷冻期或不处于冷冻期）
        return Math.max(dp[n-1][1], dp[n-1][2]);
    }
}

```

