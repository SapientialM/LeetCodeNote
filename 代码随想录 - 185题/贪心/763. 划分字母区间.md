# [763. 划分字母区间](https://leetcode.cn/problems/partition-labels/)

```java
class Solution {
    public List<Integer> partitionLabels(String s) {
        // 第一步：记录每个字母第一次和最后一次出现的位置
        Map<Character, int[]> intervals = new HashMap<>();
        
        for (int i = 0; i < s.length(); i++) {
            char c = s.charAt(i);
            if (!intervals.containsKey(c)) {
                // 第一次出现，记录起始和结束位置相同
                intervals.put(c, new int[]{i, i});
            } else {
                // 更新结束位置
                intervals.get(c)[1] = i;
            }
        }
        
        // 第二步：收集所有区间并按起始位置排序
        List<int[]> intervalList = new ArrayList<>();
        for (int[] interval : intervals.values()) {
            intervalList.add(interval);
        }
        
        // 按起始位置排序
        intervalList.sort((a, b) -> a[0] - b[0]);
        
        // 第三步：合并重叠区间
        List<int[]> merged = new ArrayList<>();
        for (int[] interval : intervalList) {
            if (merged.isEmpty() || interval[0] > merged.get(merged.size() - 1)[1]) {
                // 不重叠，直接添加
                merged.add(interval);
            } else {
                // 重叠，合并区间（取最大的结束位置）
                merged.get(merged.size() - 1)[1] = 
                    Math.max(merged.get(merged.size() - 1)[1], interval[1]);
            }
        }
        
        // 第四步：计算每个合并后区间的长度
        List<Integer> res = new ArrayList<>();
        for (int[] interval : merged) {
            res.add(interval[1] - interval[0] + 1);
        }
        
        return res;
    }
}

```

