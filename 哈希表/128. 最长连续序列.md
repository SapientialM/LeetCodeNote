# [128. 最长连续序列](https://leetcode.cn/problems/longest-consecutive-sequence/)

O(nlogn) TreeSet解法

```java
class Solution {
    public int longestConsecutive(int[] nums) {
        if(nums.length == 0){
            return 0;
        }
        TreeSet<Integer> numSet = new TreeSet<>();
        for(int i : nums){
            numSet.add(i);
        }
        int maxLength = 0;
        int nowLength = 0;
        int before = numSet.first();
        for(int i : numSet){
            if(i == before + 1){
                nowLength ++;
            }
            else{
                maxLength = Math.max(nowLength, maxLength);
                nowLength = 1;
            }
            before = i;
        }
        maxLength = Math.max(nowLength, maxLength);
        return maxLength;
    }
}
```

O(n) HashSet解法（实际上不需要排序，直接按顺序查找即可）

```java
class Solution {
    public int longestConsecutive(int[] nums) {
        Set<Integer> set = new HashSet<>();
        for(int num : nums) set.add(num);  // O(n)
        int maxLen = 0;
        for(int num : set) {
            // 只从序列起点开始检查
            if(!set.contains(num - 1)) {  // O(1)
                int currentNum = num;
                int currentLen = 1;
                
                while(set.contains(currentNum + 1)) {  // 平均 O(1)
                    currentNum++;
                    currentLen++;
                }
                maxLen = Math.max(maxLen, currentLen);
            }
        }
        return maxLen;
    }
}
```

